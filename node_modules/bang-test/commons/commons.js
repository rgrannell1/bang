
"use strict"




var commons = { }
var request = require('request')





commons.callServer = (url, callback) => {

	request({url, followRedirect: false, agent: false}, (err, res, body) => {

		setTimeout(callback, 0, {
			err,
			statusCode: res ? res.statusCode : null,
			url,
			headers: res && res.headers ? res.headers : null
		})

	})

}




commons.foldAsync = (fn, data, onComplete, acc) => {

	var recur = (result, data) => {

		data.length === 0
			? onComplete(result)
			: fn(result, data[0], fnResult => {
				recur(fnResult, data.slice(1))
			})

	}

	recur(acc ? acc : data[0], data)

}


module.exports = commons
