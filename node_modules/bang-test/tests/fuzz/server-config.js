
"use strict"




var engines    = require('bang/data/engines.json')
var constants  = require('bang-test/commons/constants')
var commons    = require('bang-test/commons/commons')
var random     = require('bang-test/commons/random')





var serverConfig = { }





serverConfig.withPatterns = {

	server: {
		fatalErrorHandler: commons.saveServerError,
		silent:            true
	},

	fuzz: {
		testsPerPattern: 100,
		randUrl: pattern => {

			var otherPatterns = commons.allPatterns(engines).filter(otherPattern => {
				return otherPattern !== pattern
			})

			var path = ''

			while (!path || otherPatterns.some(otherPattern =>  path.indexOf(otherPattern) !== -1 )) {

				path = random.bangPath.path(0, constants.UPPER_PATH_LENGTH)

			}

			var patterned = random.bangPath.pathWithPattern(path, constants.WHITESPACE_UPPER_LENGTH, pattern)

			return commons.asBangUrl(8025, patterned)

		}

	},

	duration: 10 * (60 * 1000),
	engines
}





module.exports = serverConfig
